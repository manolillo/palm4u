#$Id: .mrun.config.lcxe6 1044 2012-11-07 10:30:58Z maronga $
#column 1          column 2                                   column 3
#name of variable  value of variable (~ must not be used)     scope
#----------------------------------------------------------------------------
%mainprog          palm.f90
%base_directory    $HOME/palm/current_version
%base_data         ~/palm/current_version/JOBS
%source_path       $base_directory/trunk/SOURCE
%add_source_path   $base_directory/USER_CODE/$fname
%depository_path   $base_directory/MAKE_DEPOSITORY
%output_data       $WORK/palm/current_version/JOBS/$fname/OUTPUT
%monitoring_data   $WORK/palm/current_version/JOBS/$fname/MONITORING
%footprint_data    $WORK/palm/current_version/JOBS/$fname/FOOTPRINT
%use_makefile      true
#
# Enter your own host below by adding another line containing in the second
# column your hostname (as provided by the unix command "hostname") and in the
# third column the host identifier. Depending on your operating system, the
# first characters of the host identifier should be "lc" (Linux cluster), "ibm"
# (IBM-AIX), or "nec" (NEC-SX), respectively.
#
# The next line is just an example. Add your own line below or replace this line.
%host_identifier   blogin*                                    lccrayb
%host_identifier   bxc*                                       lccrayb
%host_identifier   hlogin*                                    lccrayh
%host_identifier   hxc*                                       lccrayh
%host_identifier   rageas                                      lcmuk
#
#
# The next block contains all informations for compiling the PALM code
# and for generating and running the PALM executable using MPI. Replace all
# required paths (given in <>) by the respective paths valid on your host.
# Also replace <hi> by your host identifier (see above) in each line!
# Compilernames, cpp-options and compiler-options are assuming
# an Intel-Compiler and mpich2 on this host! Please change
# appropriately, if you are using a different compiler / MPI-Version.
#
#
# The following 'lcmuk parallel' block assumes PALM compilation and execution
# on host gallego. Please note that other hosts within the IMUK linux cluster,
# e.g. maestro or bora, may have require different settings.
#
#

# IMUK (13.02.2017) for chemistry
%remote_username   khan                                                        lcmuk parallel
%tmp_user_catalog  /localdata/khan/TMP                                         lcmuk parallel
%output_data       /localdata/khan/JOBS/$fname/OUTPUT                          lcmuk parallel
%monitoring_data   $base_data/$fname/MONITORING                                lcmuk parallel
%compiler_name     mpif90                                                      lcmuk parallel
%compiler_name_ser ifort                                                       lcmuk parallel
%cpp_options       -cpp:-DMPI_REAL=MPI_DOUBLE_PRECISION:-DMPI_2REAL=MPI_2DOUBLE_PRECISION:-D__netcdf:-D__netcdf4:-D__netcdf4_parallel:-D__fftw:-D__intel_compiler:-DKPP_CHEM:-D__mpi3  lcmuk parallel
%netcdf_inc        -I:/muksoft/packages/netcdf/4_intel/include                 lcmuk parallel 
%netcdf_lib        -L/muksoft/packages/netcdf/4_intel/lib:-lnetcdf:-lnetcdff   lcmuk parallel
%fftw_inc          -I:/muksoft/packages/fftw/3.3.4/include                     lcmuk parallel
%fftw_lib          -L/muksoft/packages/fftw/3.3.4/lib64:-lfftw3                lcmuk parallel
%mopts             -j:4                                                        lcmuk parallel
%fopts             -fpe0:-O3:-cpp:-fp-model:source:-ftz:-fno-alias:-no-prec-div:-no-prec-sqrt:-ip:-nbs:-diag-disable:8290,8291  lcmuk parallel
%lopts             -fpe0:-O3:-cpp:-fp-model:source:-ftz:-fno-alias:-no-prec-div:-no-prec-sqrt:-ip:-nbs:-diag-disable:8290,8291  lcmuk parallel
#
#
#
#
#             
%write_binary        true                             restart
#
#
#----------------------------------------------------------------------------
# INPUT-commands, executed before running PALM - lines must start with "IC:" 
#----------------------------------------------------------------------------
#IC:
IC:[[ \$localhost = lccrayb ]]  &&  export ATP_ENABLED=1
IC:[[ \$localhost = lccrayb ]]  &&  export MPICH_GNI_BTE_MULTI_CHANNEL=disabled
IC:[[ \$localhost = lccrayb ]]  &&  export APRUN_XFER_LIMITS=1
IC:[[ \$localhost = lccrayb ]]  &&  export APRUN_XFER_STACK_LIMIT=0
IC:[[ \$localhost = lccrayb ]]  &&  ulimit -v unlimited
IC:[[ \$localhost = lccrayb ]]  &&  ulimit -s unlimited
IC:[[ \$localhost = lccrayb ]]  &&  export MPICH_MPIIO_HINTS_DISPLAY=1
IC:[[ \$localhost = lccrayb ]]  &&  export MPICH_MPIIO_STATS=1
IC:[[ \$localhost = lccrayb ]]  &&  E8="=8"
IC:[[ \$localhost = lccrayb ]]  &&  export MPICH_MPIIO_HINTS="*DATA_**:striping_factor"\$E8
#IC: mkdir PARTICLE_INFOS
#IC: mkdir PARTICLE_DATA
#IC: mkdir DATA_PRT_NETCDF
#IC: mkdir PARTICLE_RESTART_DATA_OUT
#
#----------------------------------------------------------------------------
# ERROR-commands - executed when program terminates abnormally
#----------------------------------------------------------------------------
#EC:[[ \$locat = execution ]]  &&  cat  RUN_CONTROL
#EC:pwd; ls -al
#
#----------------------------------------------------------------------------
# OUTPUT-commands - executed when program terminates normally
#----------------------------------------------------------------------------
#
# Combine 1D- and 3D-profile output (these files are not usable for plotting)
OC:[[ -f LIST_PROFIL_1D     ]]  &&  cat  LIST_PROFIL_1D  >>  LIST_PROFILE
OC:[[ -f LIST_PROFIL        ]]  &&  cat  LIST_PROFIL     >>  LIST_PROFILE
#
# Combine all particle information files
OC:[[ -f PARTICLE_INFOS/_0000 ]]  &&  cat  PARTICLE_INFOS/* >> PARTICLE_INFO
#
# Move additional particle location data files if those have been created
# during the run
# OC:[[ -f POSITIONS_010000     ]]  &&  mv POSITIONS_010* $footprint_data
#
#
#
#
#
#----------------------------------------------------------------------------
# List of input-files
#----------------------------------------------------------------------------
PARIN                    in:job        d3#      $base_data/$fname/INPUT    _p3d
PARIN                    in:job        d3f      $base_data/$fname/INPUT    _p3df
TOPOGRAPHY_DATA          in:locopt     d3#:d3f  $base_data/$fname/INPUT    _topo
PLANT_CANOPY_DATA_3D     in:locopt     d3#:d3f  $base_data/$fname/INPUT    _canopy
URBAN_SURFACE            in:locopt     d3#:d3f  $base_data/$fname/INPUT    _urbsurf
SURFACE_PARAMETERS       in:locopt     d3#:d3f  $base_data/$fname/INPUT    _surfpar
MRT_TARGETS              in:locopt     d3#:d3f  $base_data/$fname/INPUT    _mrt
ANTHROPOGENIC_HEAT       in:locopt     d3#:d3f  $base_data/$fname/INPUT    _anthropo
ANTHROPOGENIC_HEAT_PROFILE  in:locopt  d3#:d3f  $base_data/$fname/INPUT    _anthropopr
NUDGING_DATA             in:locopt     d3#:d3f  $base_data/$fname/INPUT    _nudge
LSF_DATA                 in:locopt     d3#:d3f  $base_data/$fname/INPUT    _lsf
BININ                    in:loc:flpe   d3f      $base_data/$fname/RESTART  _d3d
PARTICLE_RESTART_DATA_IN in:loc:flpe   prtf     $base_data/$fname/RESTART  _rprt
DATA_1D_PR_NETCDF        in:locopt     prf      $output_data   _pr     nc
DATA_1D_SP_NETCDF        in:locopt     spf      $output_data   _sp     nc
DATA_1D_TS_NETCDF        in:locopt     tsf      $output_data   _ts     nc
DATA_1D_TW_NETCDF        in:locopt     twf      $output_data   _tw     nc
DATA_1D_PTS_NETCDF       in:locopt     ptsf     $output_data   _pts    nc
DATA_2D_XY_NETCDF        in:locopt     xyf      $output_data   _xy     nc
DATA_2D_XY_AV_NETCDF     in:locopt     xyf      $output_data   _xy_av  nc
DATA_2D_XZ_NETCDF        in:locopt     xzf      $output_data   _xz     nc
DATA_2D_XZ_AV_NETCDF     in:locopt     xzf      $output_data   _xz_av  nc
DATA_2D_YZ_NETCDF        in:locopt     yzf      $output_data   _yz     nc
DATA_2D_YZ_AV_NETCDF     in:locopt     yzf      $output_data   _yz_av  nc
DATA_3D_NETCDF           in:locopt     3df      $output_data   _3d     nc
DATA_3D_AV_NETCDF        in:locopt     3df      $output_data   _3d_av  nc
DATA_PRT_NETCDF          in:locopt:pe  prtf     $output_data   _prt
#
#----------------------------------------------------------------------------
# List of output-files
#----------------------------------------------------------------------------
BINOUT                    out:loc:flpe restart   $base_data/$fname/RESTART  _d3d
PARTICLE_RESTART_DATA_OUT out:loc:flpe prt#:prtf $base_data/$fname/RESTART  _rprt
#
RUN_CONTROL            out:loc   d3#       $monitoring_data  _rc
RUN_CONTROL            out:loc   d3f       $monitoring_data  _rc
HEADER                 out:loc   d3#       $monitoring_data  _header
HEADER                 out:loc   d3f       $monitoring_data  _header
CPU_MEASURES           out:loc   d3#       $monitoring_data  _cpu
CPU_MEASURES           out:loc   d3f       $monitoring_data  _cpu
#
DATA_1D_PR_NETCDF      out:loc   pr#:prf   $output_data  _pr     nc
DATA_1D_SP_NETCDF      out:loc   sp#:spf   $output_data  _sp     nc
DATA_1D_TS_NETCDF      out:loc   ts#:tsf   $output_data  _ts     nc
DATA_1D_TW_NETCDF    out:loc:tr   tw#:twf  $output_data  _tw     nc
DATA_1D_PTS_NETCDF     out:loc   pts#:ptsf $output_data  _pts    nc
DATA_2D_XY_NETCDF      out:loc   xy#:xyf   $output_data  _xy     nc
DATA_2D_XY_AV_NETCDF   out:loc   xy#:xyf   $output_data  _xy_av  nc
DATA_2D_XZ_NETCDF      out:loc   xz#:xzf   $output_data  _xz     nc
DATA_2D_XZ_AV_NETCDF   out:loc   xz#:xzf   $output_data  _xz_av  nc
DATA_2D_YZ_NETCDF      out:loc   yz#:yzf   $output_data  _yz     nc
DATA_2D_YZ_AV_NETCDF   out:loc   yz#:yzf   $output_data  _yz_av  nc
DATA_3D_NETCDF         out:loc   3d#:3df   $output_data  _3d     nc
DATA_3D_AV_NETCDF      out:loc   3d#:3df   $output_data  _3d_av  nc
DATA_MASK_01_NETCDF    out:loc   ma#:maf   $output_data  _m01     nc
DATA_MASK_01_AV_NETCDF out:loc   ma#:maf   $output_data  _m01_av  nc
DATA_MASK_02_NETCDF    out:loc   ma#:maf   $output_data  _m02     nc
DATA_MASK_02_AV_NETCDF out:loc   ma#:maf   $output_data  _m02_av  nc
DATA_MASK_03_NETCDF    out:loc   ma#:maf   $output_data  _m03     nc
DATA_MASK_03_AV_NETCDF out:loc   ma#:maf   $output_data  _m03_av  nc
DATA_MASK_04_NETCDF    out:loc   ma#:maf   $output_data  _m04     nc
DATA_MASK_04_AV_NETCDF out:loc   ma#:maf   $output_data  _m04_av  nc
DATA_MASK_05_NETCDF    out:loc   ma#:maf   $output_data  _m05     nc
DATA_MASK_05_AV_NETCDF out:loc   ma#:maf   $output_data  _m05_av  nc
DATA_MASK_06_NETCDF    out:loc   ma#:maf   $output_data  _m06     nc
DATA_MASK_06_AV_NETCDF out:loc   ma#:maf   $output_data  _m06_av  nc
DATA_MASK_07_NETCDF    out:loc   ma#:maf   $output_data  _m07     nc
DATA_MASK_07_AV_NETCDF out:loc   ma#:maf   $output_data  _m07_av  nc
DATA_MASK_08_NETCDF    out:loc   ma#:maf   $output_data  _m08     nc
DATA_MASK_08_AV_NETCDF out:loc   ma#:maf   $output_data  _m08_av  nc
DATA_MASK_09_NETCDF    out:loc   ma#:maf   $output_data  _m09     nc
DATA_MASK_09_AV_NETCDF out:loc   ma#:maf   $output_data  _m09_av  nc
DATA_MASK_10_NETCDF    out:loc   ma#:maf   $output_data  _m10     nc
DATA_MASK_10_AV_NETCDF out:loc   ma#:maf   $output_data  _m10_av  nc
DATA_MASK_11_NETCDF    out:loc   ma#:maf   $output_data  _m11     nc
DATA_MASK_11_AV_NETCDF out:loc   ma#:maf   $output_data  _m11_av  nc
DATA_MASK_12_NETCDF    out:loc   ma#:maf   $output_data  _m12     nc
DATA_MASK_12_AV_NETCDF out:loc   ma#:maf   $output_data  _m12_av  nc
DATA_MASK_13_NETCDF    out:loc   ma#:maf   $output_data  _m13     nc
DATA_MASK_13_AV_NETCDF out:loc   ma#:maf   $output_data  _m13_av  nc
DATA_MASK_14_NETCDF    out:loc   ma#:maf   $output_data  _m14     nc
DATA_MASK_14_AV_NETCDF out:loc   ma#:maf   $output_data  _m14_av  nc
DATA_MASK_15_NETCDF    out:loc   ma#:maf   $output_data  _m15     nc
DATA_MASK_15_AV_NETCDF out:loc   ma#:maf   $output_data  _m15_av  nc
DATA_MASK_16_NETCDF    out:loc   ma#:maf   $output_data  _m16     nc
DATA_MASK_16_AV_NETCDF out:loc   ma#:maf   $output_data  _m16_av  nc
DATA_MASK_17_NETCDF    out:loc   ma#:maf   $output_data  _m17     nc
DATA_MASK_17_AV_NETCDF out:loc   ma#:maf   $output_data  _m17_av  nc
DATA_MASK_18_NETCDF    out:loc   ma#:maf   $output_data  _m18     nc
DATA_MASK_18_AV_NETCDF out:loc   ma#:maf   $output_data  _m18_av  nc
DATA_MASK_19_NETCDF    out:loc   ma#:maf   $output_data  _m19     nc
DATA_MASK_19_AV_NETCDF out:loc   ma#:maf   $output_data  _m19_av  nc
DATA_MASK_20_NETCDF    out:loc   ma#:maf   $output_data  _m20     nc
DATA_MASK_20_AV_NETCDF out:loc   ma#:maf   $output_data  _m20_av  nc
DATA_MASK_21_NETCDF    out:loc   ma#:maf   $output_data  _m21     nc
DATA_MASK_21_AV_NETCDF out:loc   ma#:maf   $output_data  _m21_av  nc
DATA_MASK_22_NETCDF    out:loc   ma#:maf   $output_data  _m22     nc
DATA_MASK_22_AV_NETCDF out:loc   ma#:maf   $output_data  _m22_av  nc
DATA_MASK_23_NETCDF    out:loc   ma#:maf   $output_data  _m23     nc
DATA_MASK_23_AV_NETCDF out:loc   ma#:maf   $output_data  _m23_av  nc
DATA_MASK_24_NETCDF    out:loc   ma#:maf   $output_data  _m24     nc
DATA_MASK_24_AV_NETCDF out:loc   ma#:maf   $output_data  _m24_av  nc
DATA_MASK_25_NETCDF    out:loc   ma#:maf   $output_data  _m25     nc
DATA_MASK_25_AV_NETCDF out:loc   ma#:maf   $output_data  _m25_av  nc
DATA_MASK_26_NETCDF    out:loc   ma#:maf   $output_data  _m26     nc
DATA_MASK_26_AV_NETCDF out:loc   ma#:maf   $output_data  _m26_av  nc
DATA_MASK_27_NETCDF    out:loc   ma#:maf   $output_data  _m27     nc
DATA_MASK_27_AV_NETCDF out:loc   ma#:maf   $output_data  _m27_av  nc
DATA_MASK_28_NETCDF    out:loc   ma#:maf   $output_data  _m28     nc
DATA_MASK_28_AV_NETCDF out:loc   ma#:maf   $output_data  _m28_av  nc
DATA_MASK_29_NETCDF    out:loc   ma#:maf   $output_data  _m29     nc
DATA_MASK_29_AV_NETCDF out:loc   ma#:maf   $output_data  _m29_av  nc
DATA_MASK_30_NETCDF    out:loc   ma#:maf   $output_data  _m30     nc
DATA_MASK_30_AV_NETCDF out:loc   ma#:maf   $output_data  _m30_av  nc
DATA_MASK_31_NETCDF    out:loc   ma#:maf   $output_data  _m31     nc
DATA_MASK_31_AV_NETCDF out:loc   ma#:maf   $output_data  _m31_av  nc
DATA_MASK_32_NETCDF    out:loc   ma#:maf   $output_data  _m32     nc
DATA_MASK_32_AV_NETCDF out:loc   ma#:maf   $output_data  _m32_av  nc
DATA_MASK_33_NETCDF    out:loc   ma#:maf   $output_data  _m33     nc
DATA_MASK_33_AV_NETCDF out:loc   ma#:maf   $output_data  _m33_av  nc
DATA_MASK_34_NETCDF    out:loc   ma#:maf   $output_data  _m34     nc
DATA_MASK_34_AV_NETCDF out:loc   ma#:maf   $output_data  _m34_av  nc
DATA_MASK_35_NETCDF    out:loc   ma#:maf   $output_data  _m35     nc
DATA_MASK_35_AV_NETCDF out:loc   ma#:maf   $output_data  _m35_av  nc
DATA_MASK_36_NETCDF    out:loc   ma#:maf   $output_data  _m36     nc
DATA_MASK_36_AV_NETCDF out:loc   ma#:maf   $output_data  _m36_av  nc
DATA_MASK_37_NETCDF    out:loc   ma#:maf   $output_data  _m37     nc
DATA_MASK_37_AV_NETCDF out:loc   ma#:maf   $output_data  _m37_av  nc
DATA_MASK_38_NETCDF    out:loc   ma#:maf   $output_data  _m38     nc
DATA_MASK_38_AV_NETCDF out:loc   ma#:maf   $output_data  _m38_av  nc
DATA_MASK_39_NETCDF    out:loc   ma#:maf   $output_data  _m39     nc
DATA_MASK_39_AV_NETCDF out:loc   ma#:maf   $output_data  _m39_av  nc
DATA_MASK_40_NETCDF    out:loc   ma#:maf   $output_data  _m40     nc
DATA_MASK_40_AV_NETCDF out:loc   ma#:maf   $output_data  _m40_av  nc
DATA_MASK_41_NETCDF    out:loc   ma#:maf   $output_data  _m41     nc
DATA_MASK_41_AV_NETCDF out:loc   ma#:maf   $output_data  _m41_av  nc
DATA_MASK_42_NETCDF    out:loc   ma#:maf   $output_data  _m42     nc
DATA_MASK_42_AV_NETCDF out:loc   ma#:maf   $output_data  _m42_av  nc
DATA_PRT_NETCDF      out:loc:pe   prt#:prtf $output_data  _prt    nc
DATA_PRT_NETCDF      out:loc:trpe prt#:prtf $output_data  _prt    nc
DATA_DVR             out:loc:trpe dvr       $output_data  _dvr 
#
DVRP_LOG          out:loc:tr   dv#       $monitoring_data  _dvrp_log
DVRP_LOG          out:loc:tra  dvf       $monitoring_data  _dvrp_log
PARTICLE_INFO     out:loc:tr   pt#       $monitoring_data  _prt_info
PARTICLE_INFO     out:loc:tra  ptf       $monitoring_data  _prt_info
PARTICLE_DATA     out:loc:flpe prt#:prtf $output_data      _prt_dat
# A BLANK LINE MUST FOLLOW
